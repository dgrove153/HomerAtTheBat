extends layout

block content
	include partials/teamLink

	section(id="top")
		h1
			a.hiddenLink(href="http://mlb.mlb.com/team/player.jsp?player_id=" + player.player_id)= player.name_display_first_last
		h3= player.position_txt + " - " + player.team_name

	section(id="left" style="width:520px")
		img(src="http://mlb.mlb.com/images/players/525x330/" + player.player_id + ".jpg")
		| Current Team: 
		-if(player.history[0] && player.history[0].fantasy_team != '' && player.history[0].fantasy_team != 'FA')
			mixin teamLink(teamHash[player.history[0].fantasy_team], true)
		-else
			| Free Agent

		-if(player.history[0].locked_up)
			p= "Locked up through "

		-if(user && user.role == 'admin')
			-var mlbUpdateString = "/admin/mlb/update/" + player.player_id;
			form(id="update_mlb", method="GET", action=mlbUpdateString)
				br
				input(type="submit", value="Update MLB Info")

			br
			
			-var espnUpdateString = "/admin/espn/update/" + player.espn_player_id;
			form(id="update_espn", method="GET", action=espnUpdateString)
				br
				input(type="submit", value="Update ESPN Info")

	section(id="right")
		h2(style="margin-top:0px") Fantasy History
		table
			thead
				th Year
				th Draft Team
				th Keeper Team
				th Salary
				th Contract Year
			tbody
				-each year in player.history
					-if(year.year != 2014)
						tr
							td= year.year
							td
								-if(year.draft_team == undefined || year.draft_team == '')
									| -
								-else
									mixin teamLink(teamHash[year.draft_team], false)
							td
								-if(year.keeper_team == undefined || year.keeper_team == '')
									| - 
								-else
									mixin teamLink(teamHash[year.keeper_team], false)
							td.number
								= year.salary == 0 ? "-" : year.salary
							td.number
								= year.contract_year == 0 || year.contract_year == undefined ? "-" : year.contract_year
							-if(year.minor_leaguer)
								td
									| Minor Leaguer

		h2 Stats
		table
			thead
				th Year
				-if(isHitter)
					th R
					th RBI
					th HR
					th SB
					th OBP
				-else
					th W
					th K
					th WHIP
					th ERA
					th SV
				tbody
					-each stat in player.stats
						tr
							td= stat.year
							-if(isHitter)
								td= stat.r
								td= stat.rbi
								td= stat.hr
								td= stat.sb
								td= stat.obp
							-else
								td= stat.w
								td= stat.so
								td= stat.whip
								td= stat.era
								td= stat.sv