extends layout

block content
	include partials/teamLink

	section(id="top")
		h1= player.name_display_first_last
		h3= player.position_txt + " - " + player.team_name

	section(id="left" style="width:520px")
		img(src="http://mlb.mlb.com/images/players/525x330/" + player.player_id + ".jpg")
		| Current Team: 
		-if(player.fantasy_team && player.fantasy_team != '' && player.fantasy_team != 'FA')
			mixin teamLink(teamHash[player.fantasy_team], true)
		-else
			| Free Agent

		-if(player.history[0].locked_up)
			p= "Locked up through "

		-if(user && user.role == 'admin')
			-var mlbUpdateString = "/admin/mlb/update/" + player.player_id;
			form(id="update_mlb", method="GET", action=mlbUpdateString)
				br
				input(type="submit", value="Update MLB Info")

			br
			
			-var espnUpdateString = "/admin/espn/update/" + player.espn_player_id;
			form(id="update_espn", method="GET", action=espnUpdateString)
				br
				input(type="submit", value="Update ESPN Info")

	section(id="right")
		table
			thead
				th Year
				th Draft Team
				th Keeper Team
				th Salary
				th Contract Year
			tbody
				-each year in player.history
					tr
						td= year.year
						td
							-if(year.draft_team == undefined || year.draft_team == '')
								| -
							-else
								mixin teamLink(teamHash[year.draft_team], false)
						td
							-if(year.keeper_team == undefined || year.keeper_team == '')
								| - 
							-else
								mixin teamLink(teamHash[year.keeper_team], false)
						td.number
							= year.salary == 0 ? "-" : year.salary
						td.number
							= year.contract_year == 0 || year.contract_year == undefined ? "-" : year.contract_year
						-if(year.minor_leaguer)
							td
								| Minor Leaguer